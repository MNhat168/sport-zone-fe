TÃ´i sáº½ tÃ¬m hiá»ƒu API nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ get thÃ´ng tin availability cho FE khi ngÆ°á»i dÃ¹ng muá»‘n Ä‘áº·t sÃ¢n vÃ  cáº§n kiá»ƒm tra schedule Ä‘Ã£ cÃ³ ngÆ°á»i khÃ¡c Ä‘áº·t.
Dá»±a trÃªn phÃ¢n tÃ­ch code, tÃ´i cÃ³ thá»ƒ tráº£ lá»i cÃ¢u há»i cá»§a báº¡n vá» API Ä‘á»ƒ get thÃ´ng tin availability cho FE:
ğŸ¯ API chÃ­nh Ä‘á»ƒ FE get thÃ´ng tin availability:
GET /fields/:fieldId/availability
Endpoint: GET /fields/:fieldId/availability
Query Parameters:
startDate: "YYYY-MM-DD" (required)
endDate: "YYYY-MM-DD" (required)
Example:
ğŸ“‹ Response Format:
ğŸ” CÃ¡ch hoáº¡t Ä‘á»™ng:
Pure Lazy Creation: API táº¡o virtual slots tá»« Field config
Check Schedule: Kiá»ƒm tra Schedule Ä‘Ã£ tá»“n táº¡i cho ngÃ y Ä‘Ã³
Apply Constraints: Ãp dá»¥ng bookedSlots tá»« Schedule Ä‘á»ƒ Ä‘Ã¡nh dáº¥u available: false
Return Result: Tráº£ vá» danh sÃ¡ch slots vá»›i tráº¡ng thÃ¡i available/unavailable
ğŸ’¡ Logic trong BookingsService:
ğŸ¯ Khi nÃ o FE gá»i API nÃ y:
User chá»n sÃ¢n â†’ FE gá»i API Ä‘á»ƒ get availability
User chá»n ngÃ y â†’ FE gá»i API vá»›i date range
Real-time update â†’ FE cÃ³ thá»ƒ gá»i láº¡i khi cÃ³ thay Ä‘á»•i
Check before booking â†’ FE hiá»ƒn thá»‹ slots available/unavailable
âš¡ TÃ­nh nÄƒng Ä‘áº·c biá»‡t:
Public API: KhÃ´ng cáº§n authentication
Max 30 days: Giá»›i háº¡n date range Ä‘á»ƒ trÃ¡nh overload
Real-time data: LuÃ´n reflect tráº¡ng thÃ¡i booking má»›i nháº¥t
Price calculation: Bao gá»“m cáº£ pricing info cho má»—i slot
Káº¿t luáº­n: API GET /fields/:fieldId/availability lÃ  endpoint chÃ­nh mÃ  FE sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra slots Ä‘Ã£ cÃ³ ngÆ°á»i Ä‘áº·t hay chÆ°a, vá»›i field available: false cho cÃ¡c slots Ä‘Ã£ bá»‹ book.